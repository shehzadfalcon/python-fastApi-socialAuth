# FastAPI MongoDB Project

This project is built using FastAPI with MongoDB for database operations. It provides various endpoints for user authentication, registration, password management, and email verification.

## Project Structure

The project follows a structured approach to organize its files and directories:

```
app/
├── decorators/
│ └── user.py: Decorators related to user operations.
├── enums/
│ ├── email_subject_keys.py: Keys for email subjects.
│ ├── error_messages.py: Error messages used in the application.
│ ├── response_messages.py: Response messages for API responses.
│ └── steps.py: Steps or stages used in the application logic.
├── interfaces/
│ ├── login.py: Interface related to user login.
│ └── response.py: Interface for API responses.
├── middlewares/
│ └── validation_exception_handler.py: Middleware for handling validation errors.
├── modules/
│ ├── auth/
│ │ ├── schemas/
│ │ │ ├── forgot_password.py: Schema for forgot password functionality.
│ │ │ ├── identify.py: Schema for identification.
│ │ │ ├── link_account.py: Schema for linking accounts.
│ │ │ ├── login.py: Schema for login.
│ │ │ ├── register.py: Schema for user registration.
│ │ │ ├── reset_password.py: Schema for password reset.
│ │ │ └── verify_email.py: Schema for email verification.
│ │ ├── auth_route.py: FastAPI router for authentication endpoints.
│ │ └── auth_service.py: Service logic for authentication.
│ ├── social_auth/
│ │ ├── social_auth_route.py: FastAPI router for social authentication endpoints.
│ │ └── social_auth_service.py: Service logic for social authentication.
│ └── user/
│ ├── schemas/
│ │ ├── update_password.py: Schema for updating user password.
│ │ └── update_profile.py: Schema for updating user profile.
│ ├── user_model.py: MongoDB model for user data.
│ ├── user_route.py: FastAPI router for user endpoints.
│ └── user_service.py: Service logic for user operations.
├── services/
│ ├── auth_helper.py: Helper functions for authentication.
│ └── email.py: Email service for sending emails.
├── templates/
│ ├── forgot_password.html: Template for forgot password emails.
│ ├── password_reset_confirmation.html: Template for password reset confirmation emails.
│ ├── registration.html: Template for user registration emails.
│ ├── resend_otp.html: Template for OTP resend emails.
│ └── welcome.html: Template for welcome emails.
├── utils/
│ ├── raise_exception.py: Utility for raising exceptions.
│ └── raise_response.py: Utility for generating API responses.
├── init.py: Initialization file for the app module.
├── database.py: Database configuration and connection setup.
└── main.py: Entry point script for running the FastAPI application.
```

- **.env**: Environment variables file for configuration.
- **pyproject.toml**: Poetry configuration file for dependency management.
- **requirements.txt**: List of Python dependencies.
- **poetry.lock**: Dependency lock file generated by Poetry.

## Features

- **User Authentication**: Register, login, and manage user sessions using JWT.
- **Password Management**: Allow users to reset and update their passwords securely.
- **Email Verification**: Verify user emails using OTP for enhanced security.
- **Social Authentication with Google**: Authenticate users using their Google accounts.
- **Link-Account Feature with OTP**: Enable users to link multiple accounts with OTP verification.
- **Send Email via HTML Jinja Template**: Send formatted emails using HTML templates rendered with Jinja2.
- **User Update Profile**: Allow users to update their profile information.
- **User Update Password**: Provide functionality for users to update their passwords.
- **Get Authenticated User via User Decorator**: Retrieve authenticated user details using a custom decorator.

## Installation

1.  Clone the repository:

    ```bash
    git clone https://github.com/shehzadfalcon/python-fastApi-socialAuth
    cd python-fastApi-socialAuth
    ```

2.  ```bash
    python3 -m venv venv   # or `python3 -m venv ./venv` on Windows
    source venv/bin/activate   # On Windows use `.\venv\Scripts\activate`
    ```

3.  ```bash
    pip install poetry
    ```

4.  Install dependencies using Poetry:

    ```bash
    poetry install
    ```

5.  Set up environment variables:

    - Create a `.env` file in the root directory.
    - Add necessary environment variables like `MONGODB_URI`, `SECRET_KEY`, etc.

6.  Run the application:

    ```bash
    poetry run python3 -B app/main.py
    ```

7.  Access the API:

    - Once the application is running, access the API documentation at `http://localhost:8000/docs`.

## Contributing

Contributions are welcome! If you find any issues or have suggestions, please open an issue or submit a pull request.

## License

This project is licensed under the [MIT License](LICENSE).
